(this["webpackJsonpprofile-cropper"]=this["webpackJsonpprofile-cropper"]||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a(19)},,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(4),c=a.n(o),i=(a(13),a(14),a(3)),l=a.n(i),s=a(5),m=a(2),u=a(1),p=function(e){return new Promise((function(t,a){var n=new Image;n.onload=function(){t(n)},n.onerror=function(e){return a(e)},n.crossOrigin="Anonymous",n.src=e}))};function g(e,t){return h.apply(this,arguments)}function h(){return(h=Object(s.a)(l.a.mark((function e(t,a){var n,r,o,c,i,s,m,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t);case 2:return n=e.sent,r=document.createElement("canvas"),o=r.getContext("2d"),c=document.createElement("canvas"),i=c.getContext("2d"),s=Math.max(n.width,n.height),m=s/2*Math.sqrt(2)*2,r.width=m,r.height=m,o.drawImage(n,m/2-.5*n.width,m/2-.5*n.height),u=o.getImageData(0,0,m,m),r.width=a.width,r.height=a.height,o.putImageData(u,0-m/2+.5*n.width-a.x,0-m/2+.5*n.height-a.y),c.width=1080,c.height=1080,i.drawImage(r,0,0,r.width,r.height,0,0,c.width,c.height),e.abrupt("return",c.toDataURL("image/jpeg",.5));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(16);var d=a(7),f=(a(17),function(e){var t=e.props,a=t.onClose,n=t.onCropComplete,o=t.onZoomChange,i=t.onCropChange,l=t.cropper,s=t.show,m=r.a.createElement("div",{className:"Modal"},r.a.createElement("div",{className:"Modal_content"},r.a.createElement("div",{className:"Modal_sub"},r.a.createElement(d.a,{image:l.imageUrl,zoom:l.zoom,crop:l.crop,aspect:l.aspect,onCropChange:i,onZoomChange:o,onCropComplete:n})),r.a.createElement("div",{className:"Buttons_div"},r.a.createElement("button",{className:"img_submit_btn",onClick:s},"Submit"),r.a.createElement("button",{onClick:a},"close"))));return c.a.createPortal(m,document.getElementById("modal"))}),b=function(e){return r.a.createElement(f,{props:e})},v=(a(18),function(e){return r.a.createElement("div",{className:"".concat(e.asOverLay&&"loading-overlay"," ")},r.a.createElement("div",{className:"dual-ring"}))}),E=function(e){var t=Object(n.useState)(),a=Object(u.a)(t,2),o=a[0],c=a[1],i=Object(n.useRef)(),p=Object(n.useState)(null),h=Object(u.a)(p,2),d=h[0],f=h[1],E=Object(n.useState)(!1),w=Object(u.a)(E,2),j=w[0],O=w[1],C=Object(n.useState)(!1),y=Object(u.a)(C,2),N=y[0],k=y[1],x=Object(n.useState)(),S=Object(u.a)(x,2),_=S[0],I=S[1],U=Object(n.useState)(null),D=Object(u.a)(U,2),L=D[0],M=D[1],P=Object(n.useState)({imageUrl:"",crop:{x:0,y:0},zomm:1,aspect:1}),z=Object(u.a)(P,2),B=z[0],R=z[1];Object(n.useEffect)((function(){if(o){var e=new FileReader;e.onload=function(){R((function(t){return Object(m.a)(Object(m.a)({},t),{},{imageUrl:e.result})})),O(!0)},e.readAsDataURL(o)}}),[o]);var A=Object(n.useCallback)(Object(s.a)(l.a.mark((function e(){var t,a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!0),e.next=4,g(B.imageUrl,_);case 4:return t=e.sent,f(t),F(),k(!1),(a=new FormData).append("image",t),e.next=12,fetch("http://localhost:5000/image",{method:"POST",body:a});case 12:return n=e.sent,e.next=15,n.json();case 15:r=e.sent,M("http://localhost:5000/uploads/"+r.url),console.log(r),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])}))),[_,B.imageUrl]),F=function(){O(!1)};return r.a.createElement(r.a.Fragment,null,N&&r.a.createElement(v,{asOverLay:!0}),r.a.createElement("div",{className:"Cropper"},r.a.createElement("div",{className:"profile_pic"},L&&r.a.createElement("img",{src:d||L,alt:"croped"}),!L&&d&&r.a.createElement("img",{src:d,alt:"croped"})),r.a.createElement("div",{className:"img_container"},r.a.createElement("input",{className:"img_Input",type:"file",accept:".jpg, .png, .jpeg",ref:i,style:{display:"none"},onChange:function(e){console.log(e.target.files),e.target.files&&1===e.target.files.length&&c(e.target.files[0])}}),r.a.createElement("button",{onClick:function(){i.current.click()},className:"img_picker"},"Pick Image")),j&&r.a.createElement(b,{cropper:B,onCropChange:function(e){R((function(t){return Object(m.a)(Object(m.a)({},t),{},{crop:e})}))},onCropComplete:function(e,t){I(t)},onZoomChange:function(e){R((function(t){return Object(m.a)(Object(m.a)({},t),{},{zoom:e})}))},show:A,onShow:j,isLoading:N,onClose:F})))};var w=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("nav",{className:"navigation"},r.a.createElement("div",{className:"nav_head"},r.a.createElement("h2",null,"Profile Cropper"))),r.a.createElement("main",null,r.a.createElement(E,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[8,1,2]]]);
//# sourceMappingURL=main.d7cdf72a.chunk.js.map